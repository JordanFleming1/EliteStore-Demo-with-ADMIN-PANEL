<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš¨ URGENT: Fix Firebase Permissions</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .urgent {
            background: #dc3545;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        .step {
            background: #e9ecef;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            border: 1px solid #dee2e6;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            cursor: pointer;
        }
        .btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="urgent">
            ðŸš¨ URGENT: Your Orders system has a permissions error!
        </div>
        
        <h1>ðŸ”§ Quick Fix Instructions</h1>
        
        <p><strong>Error:</strong> <code>FirebaseError: Missing or insufficient permissions</code></p>
        
        <div class="step">
            <h3>Step 1: Open Firebase Console</h3>
            <p>Click this link to go directly to your Firebase project:</p>
            <a href="https://console.firebase.google.com/project/ecommerce-store---fiverr-gig/firestore/rules" 
               class="btn" target="_blank">ðŸ”— Open Firebase Console</a>
        </div>
        
        <div class="step">
            <h3>Step 2: Update Firestore Rules</h3>
            <p>In the Firebase Console:</p>
            <ol>
                <li>Go to <strong>Firestore Database</strong> â†’ <strong>Rules</strong></li>
                <li>Replace ALL existing rules with this code:</li>
            </ol>
            
            <div class="code">rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // DEVELOPMENT RULES - Allow authenticated users full access
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // Allow public read for products and categories
    match /products/{productId} {
      allow read: if true;
    }
    
    match /categories/{categoryId} {
      allow read: if true;
    }
    
    match /reviews/{reviewId} {
      allow read: if true;
    }
  }
}</div>
            
            <p><strong>3. Click the "Publish" button</strong></p>
            <p><strong>4. Wait for "Rules published successfully" message</strong></p>
        </div>
        
        <div class="step">
            <h3>Step 3: Test the Fix</h3>
            <ol>
                <li>Go back to your application</li>
                <li>Refresh the page (F5)</li>
                <li>Navigate to <code>/admin/orders</code></li>
                <li>The error should be gone! âœ…</li>
            </ol>
        </div>
        
        <div class="success">
            <h3>âœ… After the fix, you should be able to:</h3>
            <ul>
                <li>Access the Orders page without errors</li>
                <li>Create sample orders from the admin dashboard</li>
                <li>View and manage orders in the admin panel</li>
            </ul>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border-radius: 8px;">
            <h4>ðŸŽ¯ What's happening?</h4>
            <p>Your Firebase Firestore database has security rules that are currently blocking your application from reading the orders collection. The rules above allow authenticated users (like admin users) to access all data while keeping public data (products, categories) accessible to everyone.</p>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="https://console.firebase.google.com/project/ecommerce-store---fiverr-gig/firestore/rules" 
               class="btn" target="_blank" style="font-size: 18px; padding: 15px 30px;">
               ðŸš€ Fix It Now - Open Firebase Console
            </a>
        </div>
    </div>
    
    <script>
        // Auto-copy the rules to clipboard when clicked
        document.querySelector('.code').addEventListener('click', function() {
            navigator.clipboard.writeText(this.textContent).then(function() {
                alert('Rules copied to clipboard! Paste them in Firebase Console.');
            });
        });
    </script>
</body>
</html>